"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[5088],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var i=s(96540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}},28716:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"cloud/aws/serverless-pdf-qa-architecture","title":"Serverless PDF Q&A System on AWS","description":"High-Level Architecture","source":"@site/docs/cloud/aws/serverless-pdf-qa-architecture.md","sourceDirName":"cloud/aws","slug":"/cloud/aws/serverless-pdf-qa-architecture","permalink":"/docs/cloud/aws/serverless-pdf-qa-architecture","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"Shigure","lastUpdatedAt":1769843500000,"frontMatter":{},"sidebar":"docs","previous":{"title":"aws","permalink":"/docs/category/aws"},"next":{"title":"React","permalink":"/docs/category/react"}}');var r=s(74848),t=s(28453);const l={},o="Serverless PDF Q&A System on AWS",a={},d=[{value:"High-Level Architecture",id:"high-level-architecture",level:2},{value:"Architecture Components",id:"architecture-components",level:2},{value:"1. <strong>Upload Layer</strong>",id:"1-upload-layer",level:3},{value:"Amazon S3 - PDF Storage",id:"amazon-s3---pdf-storage",level:4},{value:"API Gateway + Lambda (Upload Handler)",id:"api-gateway--lambda-upload-handler",level:4},{value:"2. <strong>Processing Pipeline</strong>",id:"2-processing-pipeline",level:3},{value:"Amazon Step Functions (State Machine)",id:"amazon-step-functions-state-machine",level:4},{value:"Amazon Textract",id:"amazon-textract",level:4},{value:"3. <strong>AI Processing Layer</strong>",id:"3-ai-processing-layer",level:3},{value:"Amazon Bedrock - Claude 3.5 Sonnet",id:"amazon-bedrock---claude-35-sonnet",level:4},{value:"Embedding Generation",id:"embedding-generation",level:4},{value:"4. <strong>Storage Layer</strong>",id:"4-storage-layer",level:3},{value:"DynamoDB - Document Metadata",id:"dynamodb---document-metadata",level:4},{value:"Amazon OpenSearch Serverless - Vector Store",id:"amazon-opensearch-serverless---vector-store",level:4},{value:"S3 - Processed Documents",id:"s3---processed-documents",level:4},{value:"5. <strong>Q&amp;A Layer</strong>",id:"5-qa-layer",level:3},{value:"RAG (Retrieval-Augmented Generation) Flow:",id:"rag-retrieval-augmented-generation-flow",level:4},{value:"Cost Optimization Strategies",id:"cost-optimization-strategies",level:2},{value:"1. <strong>Lambda Optimizations</strong>",id:"1-lambda-optimizations",level:3},{value:"2. <strong>Bedrock Cost Control</strong>",id:"2-bedrock-cost-control",level:3},{value:"3. <strong>S3 Cost Optimization</strong>",id:"3-s3-cost-optimization",level:3},{value:"4. <strong>OpenSearch Cost Control</strong>",id:"4-opensearch-cost-control",level:3},{value:"5. <strong>DynamoDB Optimization</strong>",id:"5-dynamodb-optimization",level:3},{value:"6. <strong>Monitoring &amp; Alerts</strong>",id:"6-monitoring--alerts",level:3},{value:"Scalability Considerations",id:"scalability-considerations",level:2},{value:"1. <strong>Horizontal Scaling</strong>",id:"1-horizontal-scaling",level:3},{value:"2. <strong>Async Processing</strong>",id:"2-async-processing",level:3},{value:"3. <strong>Rate Limiting</strong>",id:"3-rate-limiting",level:3},{value:"4. <strong>Caching Strategy</strong>",id:"4-caching-strategy",level:3},{value:"5. <strong>Multi-Tenancy</strong>",id:"5-multi-tenancy",level:3},{value:"6. <strong>Error Handling &amp; Resilience</strong>",id:"6-error-handling--resilience",level:3},{value:"Estimated Costs (Example: 1000 documents/month, 500 Q&amp;A queries/day)",id:"estimated-costs-example-1000-documentsmonth-500-qa-queriesday",level:2},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Deployment Recommendations",id:"deployment-recommendations",level:2},{value:"Implementation Phases",id:"implementation-phases",level:2},{value:"Phase 1: MVP (Minimum Viable Product)",id:"phase-1-mvp-minimum-viable-product",level:3},{value:"Phase 2: Vector Search",id:"phase-2-vector-search",level:3},{value:"Phase 3: Optimization",id:"phase-3-optimization",level:3},{value:"Phase 4: Enterprise Features",id:"phase-4-enterprise-features",level:3},{value:"Alternative Architectures",id:"alternative-architectures",level:2},{value:"Option 1: Use Amazon Kendra Instead of OpenSearch",id:"option-1-use-amazon-kendra-instead-of-opensearch",level:3},{value:"Option 2: Use Amazon Comprehend for Summarization",id:"option-2-use-amazon-comprehend-for-summarization",level:3},{value:"Option 3: Hybrid Approach",id:"option-3-hybrid-approach",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"serverless-pdf-qa-system-on-aws",children:"Serverless PDF Q&A System on AWS"})}),"\n",(0,r.jsx)(n.h2,{id:"high-level-architecture",children:"High-Level Architecture"}),"\n",(0,r.jsx)(n.mermaid,{value:'graph TB\n    subgraph "User Interface Layer"\n        UI[Web Application<br/>React/Vue/Angular]\n    end\n\n    subgraph "API Gateway Layer"\n        API[Amazon API Gateway<br/>REST/HTTP API]\n    end\n\n    subgraph "Authentication & Authorization"\n        COGNITO[Amazon Cognito<br/>User Pools]\n    end\n\n    subgraph "Upload & Processing Pipeline"\n        S3_UPLOAD[S3 Bucket<br/>PDF Uploads<br/>Lifecycle Policies]\n        S3_QUEUE[SQS Queue<br/>Upload Notifications]\n        LAMBDA_UPLOAD[Lambda Function<br/>Upload Handler]\n        STEP_FUNCTIONS[Step Functions<br/>Orchestration]\n    end\n\n    subgraph "PDF Processing"\n        TEXTRACT[Amazon Textract<br/>PDF Text Extraction]\n        LAMBDA_EXTRACT[Lambda Function<br/>Text Extraction Handler]\n    end\n\n    subgraph "AI Processing Layer"\n        BEDROCK[Amazon Bedrock<br/>Claude 3.5 Sonnet<br/>Summarization]\n        LAMBDA_SUMMARY[Lambda Function<br/>Summary Generator]\n        LAMBDA_EMBED[Lambda Function<br/>Embedding Generator]\n        BEDROCK_EMBED[Amazon Bedrock<br/>Titan Embeddings<br/>or Cohere Embed]\n    end\n\n    subgraph "Storage Layer"\n        S3_PROCESSED[S3 Bucket<br/>Processed Documents<br/>IA/Glacier for old]\n        DYNAMODB[DynamoDB Table<br/>Document Metadata<br/>GSI for queries]\n        OPENSEARCH[Amazon OpenSearch<br/>Vector Store<br/>Embeddings]\n    end\n\n    subgraph "Q&A Layer"\n        LAMBDA_QA[Lambda Function<br/>Q&A Handler]\n        BEDROCK_QA[Amazon Bedrock<br/>Claude 3.5 Sonnet<br/>RAG Q&A]\n        LAMBDA_RAG[Lambda Function<br/>RAG Retrieval]\n    end\n\n    subgraph "Monitoring & Cost Optimization"\n        CLOUDWATCH[CloudWatch<br/>Metrics & Logs]\n        COST_EXPLORER[Cost Explorer<br/>Billing Alerts]\n        EVENTBRIDGE[EventBridge<br/>Scheduled Jobs<br/>Cleanup Tasks]\n    end\n\n    subgraph "Cost Control Mechanisms"\n        SQS_DLQ[SQS DLQ<br/>Failed Processing]\n        LAMBDA_RESERVED[Lambda Reserved Concurrency<br/>Cost Limits]\n        BEDROCK_THROTTLE[Bedrock Request Throttling]\n    end\n\n    UI --\x3e|HTTPS| API\n    API --\x3e|Authorize| COGNITO\n    API --\x3e|POST /upload| LAMBDA_UPLOAD\n    LAMBDA_UPLOAD --\x3e|Store| S3_UPLOAD\n    S3_UPLOAD --\x3e|Event Trigger| S3_QUEUE\n    S3_QUEUE --\x3e|Trigger| STEP_FUNCTIONS\n\n    STEP_FUNCTIONS --\x3e|Extract| LAMBDA_EXTRACT\n    LAMBDA_EXTRACT --\x3e|Process| TEXTRACT\n    TEXTRACT --\x3e|Return Text| LAMBDA_EXTRACT\n\n    STEP_FUNCTIONS --\x3e|Generate Summary| LAMBDA_SUMMARY\n    LAMBDA_SUMMARY --\x3e|Invoke| BEDROCK\n    BEDROCK --\x3e|Return Summary| LAMBDA_SUMMARY\n\n    STEP_FUNCTIONS --\x3e|Generate Embeddings| LAMBDA_EMBED\n    LAMBDA_EMBED --\x3e|Invoke| BEDROCK_EMBED\n    BEDROCK_EMBED --\x3e|Return Embeddings| LAMBDA_EMBED\n\n    LAMBDA_SUMMARY --\x3e|Store Metadata| DYNAMODB\n    LAMBDA_EMBED --\x3e|Store Vectors| OPENSEARCH\n    LAMBDA_EXTRACT --\x3e|Store Processed| S3_PROCESSED\n\n    API --\x3e|POST /ask| LAMBDA_QA\n    LAMBDA_QA --\x3e|Retrieve Context| LAMBDA_RAG\n    LAMBDA_RAG --\x3e|Vector Search| OPENSEARCH\n    LAMBDA_QA --\x3e|Generate Answer| BEDROCK_QA\n    BEDROCK_QA --\x3e|Return Answer| LAMBDA_QA\n\n    STEP_FUNCTIONS --\x3e|Error| SQS_DLQ\n\n    All[All Services] --\x3e|Metrics| CLOUDWATCH\n    All --\x3e|Cost Tracking| COST_EXPLORER\n    EVENTBRIDGE --\x3e|Scheduled| S3_PROCESSED'}),"\n",(0,r.jsx)(n.h2,{id:"architecture-components",children:"Architecture Components"}),"\n",(0,r.jsxs)(n.h3,{id:"1-upload-layer",children:["1. ",(0,r.jsx)(n.strong,{children:"Upload Layer"})]}),"\n",(0,r.jsx)(n.h4,{id:"amazon-s3---pdf-storage",children:"Amazon S3 - PDF Storage"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Bucket 1"}),": ",(0,r.jsx)(n.code,{children:"pdf-uploads"})," (Standard storage)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Upload via presigned URLs or direct POST"}),"\n",(0,r.jsx)(n.li,{children:"Server-side encryption (SSE-S3 or SSE-KMS)"}),"\n",(0,r.jsx)(n.li,{children:"Lifecycle policy: Move to IA after 30 days, Glacier after 90 days"}),"\n",(0,r.jsx)(n.li,{children:"Event notifications to SQS on upload"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"api-gateway--lambda-upload-handler",children:"API Gateway + Lambda (Upload Handler)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Validates file type (PDF only)"}),"\n",(0,r.jsx)(n.li,{children:"Checks file size limits (e.g., 50MB max)"}),"\n",(0,r.jsx)(n.li,{children:"Generates presigned URLs for direct S3 upload (reduces Lambda time)"}),"\n",(0,r.jsx)(n.li,{children:"Creates metadata entry in DynamoDB"}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"2-processing-pipeline",children:["2. ",(0,r.jsx)(n.strong,{children:"Processing Pipeline"})]}),"\n",(0,r.jsx)(n.h4,{id:"amazon-step-functions-state-machine",children:"Amazon Step Functions (State Machine)"}),"\n",(0,r.jsx)(n.p,{children:"Orchestrates the entire processing workflow:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "Comment": "PDF Processing Pipeline",\n  "StartAt": "ExtractText",\n  "States": {\n    "ExtractText": {\n      "Type": "Task",\n      "Resource": "arn:aws:lambda:...:function:ExtractText",\n      "Next": "GenerateSummary",\n      "Retry": [\n        {\n          "ErrorEquals": ["States.TaskFailed"],\n          "IntervalSeconds": 2,\n          "MaxAttempts": 3,\n          "BackoffRate": 2.0\n        }\n      ],\n      "Catch": [\n        {\n          "ErrorEquals": ["States.ALL"],\n          "Next": "NotifyFailure",\n          "ResultPath": "$.error"\n        }\n      ]\n    },\n    "GenerateSummary": {\n      "Type": "Task",\n      "Resource": "arn:aws:lambda:...:function:GenerateSummary",\n      "Next": "GenerateEmbeddings"\n    },\n    "GenerateEmbeddings": {\n      "Type": "Task",\n      "Resource": "arn:aws:lambda:...:function:GenerateEmbeddings",\n      "Next": "StoreResults"\n    },\n    "StoreResults": {\n      "Type": "Task",\n      "Resource": "arn:aws:lambda:...:function:StoreResults",\n      "End": true\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"amazon-textract",children:"Amazon Textract"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Async document analysis API"}),"\n",(0,r.jsx)(n.li,{children:"Handles multi-page PDFs"}),"\n",(0,r.jsx)(n.li,{children:"Extracts text with layout preservation"}),"\n",(0,r.jsx)(n.li,{children:"Cost: ~$1.50 per 1000 pages"}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"3-ai-processing-layer",children:["3. ",(0,r.jsx)(n.strong,{children:"AI Processing Layer"})]}),"\n",(0,r.jsx)(n.h4,{id:"amazon-bedrock---claude-35-sonnet",children:"Amazon Bedrock - Claude 3.5 Sonnet"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Summarization"}),": Use ",(0,r.jsx)(n.code,{children:"anthropic.claude-3-5-sonnet-20241022-v2:0"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Prompt engineering for structured summaries"}),"\n",(0,r.jsx)(n.li,{children:"Token limits: Input up to 200K tokens, output 8K tokens"}),"\n",(0,r.jsx)(n.li,{children:"Cost: ~$3/million input tokens, ~$15/million output tokens"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Q&A with RAG"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Retrieve relevant chunks via vector search"}),"\n",(0,r.jsx)(n.li,{children:"Provide context to Claude for answer generation"}),"\n",(0,r.jsx)(n.li,{children:"Streaming responses for better UX"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"embedding-generation",children:"Embedding Generation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Option 1"}),": Amazon Titan Embeddings (",(0,r.jsx)(n.code,{children:"amazon.titan-embed-text-v2"}),")","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cost-effective, managed service"}),"\n",(0,r.jsx)(n.li,{children:"1024-dimension vectors"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Option 2"}),": Cohere Embed (",(0,r.jsx)(n.code,{children:"cohere.embed-english-v3"}),")","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Higher quality, better semantic understanding"}),"\n",(0,r.jsx)(n.li,{children:"1024-dimension vectors"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"4-storage-layer",children:["4. ",(0,r.jsx)(n.strong,{children:"Storage Layer"})]}),"\n",(0,r.jsx)(n.h4,{id:"dynamodb---document-metadata",children:"DynamoDB - Document Metadata"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Table Structure:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Partition Key: document_id (UUID)\nSort Key: None\nAttributes:\n  - user_id (GSI partition key)\n  - uploaded_at (GSI sort key)\n  - file_name\n  - file_size\n  - summary\n  - status (processing, completed, failed)\n  - s3_key\n  - processing_metadata (JSON)\n  - ttl (auto-delete old records)\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"GSIs:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user-id-index"}),": Query documents by user"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"status-index"}),": Monitor processing status"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Cost Optimization:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"On-demand pricing for variable workloads"}),"\n",(0,r.jsx)(n.li,{children:"TTL for automatic cleanup"}),"\n",(0,r.jsx)(n.li,{children:"Efficient indexing strategy"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"amazon-opensearch-serverless---vector-store",children:"Amazon OpenSearch Serverless - Vector Store"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Vector similarity search using ",(0,r.jsx)(n.code,{children:"k-NN"})," plugin"]}),"\n",(0,r.jsxs)(n.li,{children:["Index structure:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Document chunks (with metadata)"}),"\n",(0,r.jsx)(n.li,{children:"Vector embeddings (1024 dimensions)"}),"\n",(0,r.jsx)(n.li,{children:"Metadata filters (user_id, document_id, date_range)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Cost Optimization:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Serverless OpenSearch (pay per query)"}),"\n",(0,r.jsx)(n.li,{children:"Implement caching for frequent queries"}),"\n",(0,r.jsx)(n.li,{children:"Use filtering to reduce search space"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"s3---processed-documents",children:"S3 - Processed Documents"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Store extracted text and summaries"}),"\n",(0,r.jsxs)(n.li,{children:["Lifecycle policies for cost optimization:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Standard \u2192 IA (after 30 days)"}),"\n",(0,r.jsx)(n.li,{children:"IA \u2192 Glacier (after 90 days)"}),"\n",(0,r.jsx)(n.li,{children:"Glacier \u2192 Delete (after 1 year)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"5-qa-layer",children:["5. ",(0,r.jsx)(n.strong,{children:"Q&A Layer"})]}),"\n",(0,r.jsx)(n.h4,{id:"rag-retrieval-augmented-generation-flow",children:"RAG (Retrieval-Augmented Generation) Flow:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"User submits question via API Gateway"}),"\n",(0,r.jsx)(n.li,{children:"Lambda generates embedding for the question"}),"\n",(0,r.jsx)(n.li,{children:"Vector similarity search in OpenSearch (top-k: 5-10 chunks)"}),"\n",(0,r.jsx)(n.li,{children:"Retrieve relevant document chunks"}),"\n",(0,r.jsx)(n.li,{children:"Construct prompt with context + question"}),"\n",(0,r.jsx)(n.li,{children:"Invoke Bedrock Claude 3.5 for answer generation"}),"\n",(0,r.jsx)(n.li,{children:"Return answer with source citations"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"cost-optimization-strategies",children:"Cost Optimization Strategies"}),"\n",(0,r.jsxs)(n.h3,{id:"1-lambda-optimizations",children:["1. ",(0,r.jsx)(n.strong,{children:"Lambda Optimizations"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reserved Concurrency"}),": Set limits per function to prevent cost spikes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Memory Allocation"}),": Right-size based on actual usage (start with 256MB, optimize)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Provisioned Concurrency"}),": Only for critical, low-latency paths (Q&A endpoint)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timeouts"}),": Set aggressive timeouts (30-60s) to prevent runaway costs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dead Letter Queues"}),": Monitor failures without retry costs"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"2-bedrock-cost-control",children:["2. ",(0,r.jsx)(n.strong,{children:"Bedrock Cost Control"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Request Throttling"}),": Implement rate limiting per user/tenant"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Token Budgets"}),": Set daily/monthly token limits per user"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Caching"}),": Cache summaries and embeddings for identical documents"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Streaming"}),": Use streaming for Q&A to show partial results (better UX)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Model Selection"}),": Use Claude 3 Haiku for simple tasks, Sonnet for complex"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"3-s3-cost-optimization",children:["3. ",(0,r.jsx)(n.strong,{children:"S3 Cost Optimization"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Lifecycle Policies"}),": Automatic tier transitions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"S3 Intelligent-Tiering"}),": For unpredictable access patterns"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Compression"}),": Compress stored text (gzip) before storing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Presigned URLs"}),": Direct upload to reduce Lambda processing time"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"4-opensearch-cost-control",children:["4. ",(0,r.jsx)(n.strong,{children:"OpenSearch Cost Control"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Serverless Mode"}),": Pay only for what you use"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Query Caching"}),": Cache frequent queries (e.g., common questions)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Batch Operations"}),": Batch embedding storage operations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Index Lifecycle"}),": Delete old vectors automatically"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"5-dynamodb-optimization",children:["5. ",(0,r.jsx)(n.strong,{children:"DynamoDB Optimization"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"On-Demand"}),": For variable workloads (no capacity planning)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"TTL"}),": Auto-delete old records"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Efficient GSIs"}),": Only create necessary indexes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Batch Operations"}),": Batch write/read operations"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"6-monitoring--alerts",children:["6. ",(0,r.jsx)(n.strong,{children:"Monitoring & Alerts"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CloudWatch Billing Alarms"}),": Alert on cost thresholds"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cost Anomaly Detection"}),": Detect unusual spending patterns"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Service-Level Metrics"}),": Track per-service costs"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Usage Dashboards"}),": Real-time cost visibility"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"scalability-considerations",children:"Scalability Considerations"}),"\n",(0,r.jsxs)(n.h3,{id:"1-horizontal-scaling",children:["1. ",(0,r.jsx)(n.strong,{children:"Horizontal Scaling"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All components are serverless and auto-scale"}),"\n",(0,r.jsx)(n.li,{children:"No manual capacity planning required"}),"\n",(0,r.jsx)(n.li,{children:"Handles sudden traffic spikes automatically"}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"2-async-processing",children:["2. ",(0,r.jsx)(n.strong,{children:"Async Processing"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Uploads trigger async processing pipeline"}),"\n",(0,r.jsx)(n.li,{children:"Users get immediate acknowledgment"}),"\n",(0,r.jsx)(n.li,{children:"Processing status tracked in DynamoDB"}),"\n",(0,r.jsx)(n.li,{children:"WebSocket/SSE for real-time status updates (optional)"}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"3-rate-limiting",children:["3. ",(0,r.jsx)(n.strong,{children:"Rate Limiting"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"API Gateway throttling (requests per second per API key)"}),"\n",(0,r.jsx)(n.li,{children:"Per-user limits via Cognito groups"}),"\n",(0,r.jsx)(n.li,{children:"SQS message throttling for processing queue"}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"4-caching-strategy",children:["4. ",(0,r.jsx)(n.strong,{children:"Caching Strategy"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API Gateway Caching"}),": Cache Q&A responses (short TTL: 5-10 min)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Lambda Layer Caching"}),": Cache embeddings for common documents"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CloudFront"}),": CDN for static assets (if web UI is static)"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"5-multi-tenancy",children:["5. ",(0,r.jsx)(n.strong,{children:"Multi-Tenancy"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cognito User Pools for isolation"}),"\n",(0,r.jsx)(n.li,{children:"DynamoDB partition key includes tenant/user_id"}),"\n",(0,r.jsx)(n.li,{children:"OpenSearch index per tenant (or metadata filtering)"}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"6-error-handling--resilience",children:["6. ",(0,r.jsx)(n.strong,{children:"Error Handling & Resilience"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Step Functions retry logic with exponential backoff"}),"\n",(0,r.jsx)(n.li,{children:"Dead Letter Queues for failed messages"}),"\n",(0,r.jsx)(n.li,{children:"Circuit breakers for external service calls"}),"\n",(0,r.jsx)(n.li,{children:"Graceful degradation (fallback to cached responses)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"estimated-costs-example-1000-documentsmonth-500-qa-queriesday",children:"Estimated Costs (Example: 1000 documents/month, 500 Q&A queries/day)"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Service"}),(0,r.jsx)(n.th,{children:"Usage"}),(0,r.jsx)(n.th,{children:"Monthly Cost (USD)"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"S3 Storage (100GB)"}),(0,r.jsx)(n.td,{children:"100GB Standard"}),(0,r.jsx)(n.td,{children:"~$2.30"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"S3 Requests"}),(0,r.jsx)(n.td,{children:"10K PUT, 50K GET"}),(0,r.jsx)(n.td,{children:"~$0.50"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Lambda"}),(0,r.jsx)(n.td,{children:"10M invocations, 50GB-sec"}),(0,r.jsx)(n.td,{children:"~$20"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Textract"}),(0,r.jsx)(n.td,{children:"5K pages"}),(0,r.jsx)(n.td,{children:"~$7.50"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Bedrock Claude 3.5"}),(0,r.jsx)(n.td,{children:"100M input tokens, 5M output tokens"}),(0,r.jsx)(n.td,{children:"~$375"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Bedrock Embeddings"}),(0,r.jsx)(n.td,{children:"100K embeddings"}),(0,r.jsx)(n.td,{children:"~$1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"DynamoDB"}),(0,r.jsx)(n.td,{children:"1M read, 500K write"}),(0,r.jsx)(n.td,{children:"~$0.25"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"OpenSearch Serverless"}),(0,r.jsx)(n.td,{children:"100K queries"}),(0,r.jsx)(n.td,{children:"~$50"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"API Gateway"}),(0,r.jsx)(n.td,{children:"15K requests"}),(0,r.jsx)(n.td,{children:"~$1"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Step Functions"}),(0,r.jsx)(n.td,{children:"1K executions"}),(0,r.jsx)(n.td,{children:"~$0.50"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Total"})}),(0,r.jsx)(n.td,{}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"~$458/month"})})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Cost Reduction Tips:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use Claude 3 Haiku for simple Q&A: -60% cost"}),"\n",(0,r.jsx)(n.li,{children:"Implement aggressive caching: -40% Bedrock costs"}),"\n",(0,r.jsx)(n.li,{children:"Optimize S3 lifecycle: -50% storage costs"}),"\n",(0,r.jsx)(n.li,{children:"Batch processing: -30% Lambda costs"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Authentication"}),": Cognito User Pools with MFA"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Authorization"}),": IAM roles with least privilege"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Encryption"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"S3: SSE-S3 or SSE-KMS"}),"\n",(0,r.jsx)(n.li,{children:"DynamoDB: Encryption at rest"}),"\n",(0,r.jsx)(n.li,{children:"API Gateway: TLS 1.2+"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data Isolation"}),": Tenant-based data separation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Audit Logging"}),": CloudTrail for all API calls"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"VPC"}),": Optional VPC for Lambda (if needed for compliance)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"deployment-recommendations",children:"Deployment Recommendations"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Infrastructure as Code"}),": AWS CDK or Terraform"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CI/CD"}),": GitHub Actions or AWS CodePipeline"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitoring"}),": CloudWatch Dashboards + X-Ray for tracing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Testing"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Unit tests for Lambda functions"}),"\n",(0,r.jsx)(n.li,{children:"Integration tests for Step Functions"}),"\n",(0,r.jsx)(n.li,{children:"Load testing for cost validation"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multi-Region"}),": Deploy in multiple regions for DR (optional)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"implementation-phases",children:"Implementation Phases"}),"\n",(0,r.jsx)(n.h3,{id:"phase-1-mvp-minimum-viable-product",children:"Phase 1: MVP (Minimum Viable Product)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"S3 upload \u2192 Textract \u2192 Bedrock summary \u2192 DynamoDB"}),"\n",(0,r.jsx)(n.li,{children:"Basic Q&A with simple keyword search"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"phase-2-vector-search",children:"Phase 2: Vector Search"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Implement embeddings and OpenSearch"}),"\n",(0,r.jsx)(n.li,{children:"RAG-based Q&A"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"phase-3-optimization",children:"Phase 3: Optimization"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cost optimization"}),"\n",(0,r.jsx)(n.li,{children:"Caching layer"}),"\n",(0,r.jsx)(n.li,{children:"Advanced monitoring"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"phase-4-enterprise-features",children:"Phase 4: Enterprise Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Multi-tenancy"}),"\n",(0,r.jsx)(n.li,{children:"Advanced analytics"}),"\n",(0,r.jsx)(n.li,{children:"Fine-tuning capabilities"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"alternative-architectures",children:"Alternative Architectures"}),"\n",(0,r.jsx)(n.h3,{id:"option-1-use-amazon-kendra-instead-of-opensearch",children:"Option 1: Use Amazon Kendra Instead of OpenSearch"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pros"}),": Fully managed, better semantic search, no infrastructure management"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cons"}),": Higher cost, less customization"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use Case"}),": Enterprise customers with budget"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"option-2-use-amazon-comprehend-for-summarization",children:"Option 2: Use Amazon Comprehend for Summarization"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pros"}),": Lower cost for simple summaries"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cons"}),": Less flexible, lower quality than Claude"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use Case"}),": Cost-sensitive scenarios with simple documents"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"option-3-hybrid-approach",children:"Option 3: Hybrid Approach"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use Bedrock for complex documents"}),"\n",(0,r.jsx)(n.li,{children:"Use Comprehend for simple documents"}),"\n",(0,r.jsx)(n.li,{children:"Route based on document complexity"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Set up AWS account with appropriate service quotas"}),"\n",(0,r.jsx)(n.li,{children:"Create proof-of-concept with one document"}),"\n",(0,r.jsx)(n.li,{children:"Measure actual costs and optimize"}),"\n",(0,r.jsx)(n.li,{children:"Scale incrementally based on usage patterns"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);